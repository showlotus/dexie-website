<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>
    Export and Import Database
  </title>
  <meta
    name="description"
    content="The easiest way to use IndexedDB. A lightweight, minimalistic wrapper that provides a straightforward API for developers using IndexedDB."
  />

  <link href="/assets/css/bootstrap.min.css" rel="stylesheet" />
  <link href="/assets/css/prism-vscode-dark.css" rel="stylesheet" />
  <link href="/assets/css/stylesheet.css" rel="stylesheet" />
  <link href="/assets/css/docs.css" rel="stylesheet" />
  <link href="/assets/css/font-awesome.min.css" rel="stylesheet" />
  <link rel="shortcut icon" href="/assets/images/favicon-yuri.png" />
  <script src="/assets/js/offline-switch.js"></script>
  <script src="/assets/js/prism-highlight.js"></script>
  <script src="/assets/js/ukraine2.js"></script>
</head>


  <body>
		<nav class="navbar navbar-default" style="z-index: 10;">
  <div class="container-fluid">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <!-- <a class="navbar-brand" href="/" style="background-image: url('/assets/images/dexie-logo-icon-menu-dark-bkgimg.svg'); background-repeat: no-repeat; background-position: 7px 8px;">Dexie.js</a> -->
      <a class="navbar-brand" href="/stop-the-war" style="white-space: nowrap;"><img alt="Support Ukraine!" src="/assets/images/ukraine-flag.png" style="
        float: left;
        height: 16px;
        width: 16px;
        margin: 2px 4px 0 0;
    "> </a>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav">
        <li><a href="/"><img alt="" src="/assets/images/dexie-logo-icon-menu-dark-img.svg" class="dexie-logo-icon-menu" />Dexie.js</a></li>
        <li><a href="/cloud/"><img alt="" src="/assets/images/dexie-logo-icon-menu-dark-img.svg" class="dexie-logo-icon-menu" />Dexie Cloud</a></li>
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Docs <span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a href="/docs/Tutorial/Getting-started">Getting Started</a></li>
            <li><a href="/docs/Samples">Dexie.js Samples</a></li>
            <li><a href="/docs/">Dexie.js Docs</a></li>
            <li><a href="/docs/API-Reference#quick-reference">Dexie.js Cheat Sheet</a></li>
            <li role="separator" class="divider"></li>
            <li><a href="/cloud/docs/">Dexie Cloud Docs</a></li>
            <li><a href="/cloud/docs/cli">Dexie Cloud CLI</a></li>
          </ul>
        </li>
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Support <span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a href="http://stackoverflow.com/questions/tagged/dexie">Dexie Questions on StackOverflow</a></li>
            <li><a href="https://github.com/dexie/Dexie.js/issues?utf8=%E2%9C%93&q=is%3Aissue%20label%3Aquestion">Questions on GitHub</a></li>
            <li role="separator" class="divider"></li>
            <li><a href="http://stackoverflow.com/questions/ask?tags=dexie">Ask Dexie question on Stackoverflow (best chance for a reply)</a></li>
            <li><a href="https://github.com/dexie/Dexie.js/issues/new?labels=cloud,question">Ask Dexie Cloud question on GitHub</a></li>
            <li><a href="https://github.com/dexie/Dexie.js/issues/new">File a GitHub issue on Dexie.js</a></li>
            <li role="separator" class="divider"></li>
            <li><a href="/contact#private-support-issues">Private support</a></li>
            <li><a href="https://betteruptime.com/report/ArgfwoqUmwYQCdwYWHRUDkdc">Report issue with Dexie Cloud service</a></li>
            <li><a href="https://www.dexie-cloud-status.com" target="dexie-cloud-status">Dexie Cloud Status</a></li>
            <li role="separator" class="divider"></li>
            <li><a href="/contact">Contact</a></li>
          </ul>
        </li>
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Who uses Dexie? <span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a target="_blank" href="https://www.whatsapp.com/"><img class="icon" src="/assets/images/whatsapp.png"> WhatsApp</a></li>
            <li><a target="_blank" href="https://totodo.app/"><img class="icon" src="/assets/images/totodo.ico"> To To-Do - AI Integrated Life Organizer</a></li>
            <li><a target="_blank" href="https://todo.microsoft.com/"><img class="icon" src="/assets/images/microsoft-todo.ico"> Microsoft To Do</a></li>
            <li><a target="_blank" href="https://desktop.github.com/"><img class="icon" src="/assets/images/github-desktop-icon.svg" > GitHub Desktop</a></li>
            <li><a target="_blank" href="https://www.flightradar24.com/"><img class="icon" src="/assets/images/flightradar24.svg"> Flightradar24 - real-time flight info</a></li>
            <li><a target="_blank" href="https://www.loom.com/"><img class="icon" src="/assets/images/loom.ico"> Loom - Video messaging</a></li>
            <li><a target="_blank" href="https://wire.com/"><img class="icon" src="/assets/images/wire-icon.ico"> Wire - An end-to-end encrypted chat application</a></li>
            <li><a target="_blank" href="https://github.com/dexie/Dexie.js/network/dependents?package_id=UGFja2FnZS0xMzg0ODIyOQ%3D%3D">... more than 20,000 repos on GitHub</a></li>
          </ul>
        </li>
        <li><a href="/contact">Contact </a></li>
        
        <li><a href="https://github.com/dexie/Dexie.js/releases">Releases </a></li>
        <li><a href="/roadmap/">Road Map</a></li>
        <li><a href="https://medium.com/dexie-js" target="dexie-blog">Blog </a></li>
      </ul>
    </div><!-- /.navbar-collapse -->

    <div id="offline-switch">
  <span id="offline-switch-enabled" style="display:none;" title="Make Dexie documentation available offline">
    <span id="offlineOffHeading">Make offline</span>
    <span id="offlineOnHeading">Available offline</span>
    <label class="switch">
      <input
        id="offline-checkbox"
    aria-labelledby="offlineOffHeading"
        type="checkbox"
        onchange="setOffline(event.target.checked)"
      />
      <span class="slider round"></span>
    </label>
  </span>
  <img id="cookie-settings-icon"
    src="/assets/images/cookie-32.png"
    style="margin-left: 8px; width:24px;height: 24px;margin-top: -4px; cursor:pointer; display: none;"
    alt="Cookie settings"
    title="Cookie settings"
    onclick="glowCookies.openSelector();"
  />
  <!-- <script>
    updateSwitchFromStorage();
  </script> -->
</div>

    
  </div><!-- /.container-fluid -->
</nav>		
<script>
    document.querySelectorAll('nav.navbar ul>li>a').forEach(function (a) {
      var href = a.getAttribute('href');
      href = href && href.split('#')[0];
      if (href && location.pathname === href) {
        //console.log("Selected: ", a.href);
        a.closest('li').className += ' active';
      }
    });
</script>

    <header class="site-header">
  <div class="jumbotron docs-page-jumbotron ">
    <div class="container">
      <!-- <div style="position:relative; margin:0;padding:0; width: 100%;">
        <a href="/cloud/" style="position: absolute; top: 0; right: 200px;">
          <h1>Need Sync?</h1>
        </a>
      </div> -->
      
      
      <img src="/assets/images/dexie-logo-icon.svg" class="dexie-logo-icon" />
      <h1>
        <a href="/">Dexie.js Docs</a>
      </h1>
      

      
    
      <!-- <a href="/cloud/" id="cloud-promoter">
        <div class="shoutouts">
          <p>Need sync?</p>
          <p>Create collaborative offline-first apps</p>
          <p>Easy to get started</p>
        </div>
        <p>Coming soon: Dexie Cloud<span class="beta">BETA</span><span style="display: inline-block; margin-left: -1em;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&raquo;</span></p>
      </a>  
      -->
      
<!-- <div id="current-announcement" style="font-size: 14pt; padding-top: 4px; /*position: absolute; top: 50px; right: 50px;*/">
  <a href="/announcements/2024-03-27" style="color: white; text-decoration: underline;">Announcement: Dexie Cloud is now publicly released!</a>💥 
</div>-->


      <!-- Github star button -->
<div id="star-button">
  <!-- Place this tag where you want the button to render. -->
  <a class="github-button" href="https://github.com/dexie/Dexie.js" data-size="large" data-show-count="true" aria-label="Star dfahlander/Dexie.js on GitHub">Star</a>
</div>
<!-- Place this tag in your head or just before your close body tag. -->
<script async defer src="https://buttons.github.io/buttons.js"></script>

    </div>
</div>
</header>
<script src="/assets/js/anime.min.js"></script>
<script src="/assets/js/shoutouts.js"></script>


    <main class="container">
      <div class="row">
  <div class="col-xs-12 col-md-8">
    <div class="row docs-page-subheader">
      <h1 class="col-xs-12 col-md-9">Export and Import Database</h1>
      <div class="hidden-xs col-md-3">
        <a class="btn btn-primary btn-edit-doc-page" href="https://github.com/dfahlander/dexie.js-web/edit/gh-pages/docs/ExportImport/dexie-export-import.md">
          <span class="glyphicon glyphicon-edit"></span>&nbsp; Edit on GitHub
        </a>
      </div>
    </div>

    <div class="row docs-page-subtitle">
      <div class="col-xs-12">
        
      </div>
    </div>
    <div class="row docs-page">
      <div class="col-xs-12">
        <p>Export / Import IndexedDB &lt;—&gt; Blob</p>

<p>The npm package <a href="https://www.npmjs.com/package/dexie-export-import">dexie-export-import</a> extends Dexie with the capability to export and import databases to and from Blobs.</p>

<h1 id="install">Install</h1>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm install dexie
npm install dexie-export-import
</code></pre></div></div>

<h1 id="usage">Usage</h1>

<p>Here’s the basic usage. There’s a lot you can do by supplying optional <code class="language-plaintext highlighter-rouge">[options]</code> arguments. The available options are described later on in this README (See Typescript interfaces below).</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">Dexie</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">dexie</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span><span class="nx">importDB</span><span class="p">,</span> <span class="nx">exportDB</span><span class="p">,</span> <span class="nx">importInto</span><span class="p">,</span> <span class="nx">peakImportFile</span><span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">dexie-export-import</span><span class="dl">"</span><span class="p">;</span>

<span class="c1">//</span>
<span class="c1">// --- importDB() ---</span>
<span class="c1">//</span>
<span class="c1">// Import from Blob or File to Dexie instance:</span>
<span class="c1">//</span>
<span class="kd">const</span> <span class="nx">db</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">importDB</span><span class="p">(</span><span class="nx">blob</span><span class="p">,</span> <span class="p">[</span><span class="nx">options</span><span class="p">]);</span>

<span class="c1">//</span>
<span class="c1">// --- exportDB() ---</span>
<span class="c1">//</span>
<span class="c1">// Export to Blob</span>
<span class="c1">//</span>
<span class="kd">const</span> <span class="nx">blob</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">exportDB</span><span class="p">(</span><span class="nx">db</span><span class="p">,</span> <span class="p">[</span><span class="nx">options</span><span class="p">]);</span>

<span class="c1">//</span>
<span class="c1">// --- importInto() ---</span>
<span class="c1">//</span>
<span class="c1">// Import from Blob or File to existing Dexie instance</span>
<span class="c1">//</span>
<span class="k">await</span> <span class="nx">importInto</span><span class="p">(</span><span class="nx">db</span><span class="p">,</span> <span class="nx">blob</span><span class="p">,</span> <span class="p">[</span><span class="nx">options</span><span class="p">]);</span>

<span class="c1">//</span>
<span class="c1">// --- peakImportFile() ---</span>
<span class="c1">//</span>
<span class="c1">// If you need to peek the metadata from the import file without actually</span>
<span class="c1">// performing any import operation</span>
<span class="c1">// (since v1.0.0)</span>
<span class="c1">//</span>
<span class="kd">const</span> <span class="nx">importMeta</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">peakImportFile</span><span class="p">(</span><span class="nx">blob</span><span class="p">);</span>

<span class="nx">assert</span><span class="p">.</span><span class="nx">areEqual</span><span class="p">(</span><span class="nx">importMeta</span><span class="p">.</span><span class="nx">formatName</span><span class="p">,</span> <span class="dl">"</span><span class="s2">dexie</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">assert</span><span class="p">.</span><span class="nx">isTrue</span><span class="p">(</span><span class="nx">importMeta</span><span class="p">.</span><span class="nx">formatVersion</span> <span class="o">===</span> <span class="mi">1</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Database name:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">importMeta</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">databaseName</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Database version:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">importMeta</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">databaseVersion</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Database version:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">importMeta</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">databaseVersion</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Tables:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">importMeta</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">tables</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">t</span> <span class="o">=&gt;</span>
  <span class="s2">`</span><span class="p">${</span><span class="nx">t</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span><span class="s2"> (</span><span class="p">${</span><span class="nx">t</span><span class="p">.</span><span class="nx">rowCount</span><span class="p">}</span><span class="s2"> rows)`</span>
<span class="p">).</span><span class="nx">join</span><span class="p">(</span><span class="dl">'</span><span class="se">\n\t</span><span class="dl">'</span><span class="p">));</span>


</code></pre></div></div>
<p>Note that you can also import the package as follows:</p>

<p><em>NOTE:</em> Typescript users using dexie@2.x will get compilation errors if using the static import method <code class="language-plaintext highlighter-rouge">Dexie.import()</code>.</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">Dexie</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">dexie</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="dl">"</span><span class="s2">dexie-export-import</span><span class="dl">"</span><span class="p">;</span>

<span class="c1">//</span>
<span class="c1">// --- Dexie.import() ---</span>
<span class="c1">//</span>
<span class="c1">// Import from Blob or File to Dexie instance:</span>
<span class="c1">//</span>
<span class="kd">const</span> <span class="nx">db</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">Dexie</span><span class="p">.</span><span class="k">import</span><span class="p">(</span><span class="nx">blob</span><span class="p">,</span> <span class="p">[</span><span class="nx">options</span><span class="p">]);</span> <span class="c1">// equivalent to importDB()</span>

<span class="c1">//</span>
<span class="c1">// --- db.export() ---</span>
<span class="c1">//</span>
<span class="c1">// Export to Blob</span>
<span class="c1">//</span>
<span class="kd">const</span> <span class="nx">blob</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">db</span><span class="p">.</span><span class="k">export</span><span class="p">([</span><span class="nx">options</span><span class="p">]);</span> <span class="c1">// equivalent to exportDB()</span>

<span class="c1">//</span>
<span class="c1">// --- db.import() ---</span>
<span class="c1">//</span>
<span class="c1">// Import from Blob or File to existing Dexie instance</span>
<span class="c1">//</span>
<span class="k">await</span> <span class="nx">db</span><span class="p">.</span><span class="k">import</span><span class="p">(</span><span class="nx">blob</span><span class="p">,</span> <span class="p">[</span><span class="nx">options</span><span class="p">]);</span> <span class="c1">// equivalent to importInto()</span>

</code></pre></div></div>

<h1 id="sample">Sample</h1>

<p><a href="https://codepen.io/dfahlander/pen/RqwoaB/">Here’s a working sample</a> on CodePen. It uses <a href="https://www.npmjs.com/package/downloadjs">downloadjs</a> to deliver the blob as a “file download” to the user. For receiving an import file, it uses a drop area where you can drop your JSON file. Click the Console tab in the bottom to see what progressCallbacks receive.</p>

<p>Even though this sample doesn’t show it, blobs can also be sent or retrieved to/from a server, using the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API">fetch API</a>.</p>

<p><a href="https://dfahlander.medium.com/export-indexeddb-from-a-web-app-using-devtools-62c55a8996a1">Here’s a blog article</a> on how to export IndexedDB from DevTools on an arbitrary web page or web app, by dynamically including dexie and dexie-export-import in the devtools console.</p>

<h1 id="features">Features</h1>

<ul>
  <li>Export of IndexedDB Database to JSON Blob.</li>
  <li>Import from Blob back to IndexedDB Database.</li>
  <li>An import Blob can be retrieved from an URL (using fetch()) or from a user-input file (dropped or browsed to).</li>
  <li>An export Blob can be either given end-user to be stored in Downloaded Files, or be send to a server over HTTP(S) using fetch().</li>
  <li>Chunk-wise / Streaming - does not read the entire DB into RAM</li>
  <li>Progress callback (typically for showing progress bar)</li>
  <li>Optional filter allows to import/export subset of data</li>
  <li>Optional transform allows to alter or migrate data being imported</li>
  <li>Support for all structured cloneable exotic types (Date, ArrayBuffer, Blob, etc) except CryptoKeys (which by design cannot be exported)</li>
  <li>Atomic - import / export within one database transaction (optional)</li>
  <li>Export speed: Using getAll() in chunks rather than openCursor().</li>
  <li>Import speed: Using bulkPut() in chunks rather than put().</li>
  <li>Can well be run from a Web Worker (better speed + doesn’t lock GUI).</li>
  <li>Can also export IndexedDB databases that was not created with Dexie.</li>
</ul>

<h1 id="compatibility">Compatibility</h1>

<table>
  <thead>
    <tr>
      <th>Product</th>
      <th>Supported versions</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>dexie</td>
      <td>^2.0.4, ^3.x, ^4.x</td>
    </tr>
    <tr>
      <td>Safari</td>
      <td>^10.1</td>
    </tr>
    <tr>
      <td>IE</td>
      <td>11</td>
    </tr>
    <tr>
      <td>Edge</td>
      <td>any version</td>
    </tr>
    <tr>
      <td>Chrome</td>
      <td>any version</td>
    </tr>
    <tr>
      <td>FF</td>
      <td>any version</td>
    </tr>
  </tbody>
</table>

<h1 id="similar-libraries">Similar Libraries</h1>
<h2 id="indexeddb-export-import"><a href="https://github.com/Polarisation/indexeddb-export-import">indexeddb-export-import</a></h2>

<p>Much smaller in size, but also much lighter than dexie-export-import.</p>

<p><a href="https://github.com/Polarisation/indexeddb-export-import">Indexeddb-export-import</a> can be better choice if:</p>

<ul>
  <li>your data contains no Dates, ArrayBuffers, TypedArrays or Blobs (only objects, strings, numbers, booleans and arrays).</li>
  <li>your database is small enough to fit in RAM on your target devices.</li>
</ul>

<p>Dexie-export-import was build to scale when exporting large databases without consuming much RAM. It does also support importing/exporting exotic types.</p>

<h1 id="interface">Interface</h1>

<p>Importing this module will extend Dexie and Dexie.prototype as follows.
Even though this is conceptually a Dexie.js addon, there is no addon instance.
Extended interface is done into Dexie and Dexie.prototype as a side effect when
importing the module.</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//</span>
<span class="c1">// Extend Dexie interface (typescript-wise)</span>
<span class="c1">//</span>
<span class="kr">declare</span> <span class="kr">module</span> <span class="dl">'</span><span class="s1">dexie</span><span class="dl">'</span> <span class="p">{</span>
  <span class="c1">// Extend methods on db</span>
  <span class="kr">interface</span> <span class="nx">Dexie</span> <span class="p">{</span>
    <span class="k">export</span><span class="p">(</span><span class="nx">options</span><span class="p">?:</span> <span class="nx">ExportOptions</span><span class="p">):</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="nx">Blob</span><span class="o">&gt;</span><span class="p">;</span>
    <span class="k">import</span><span class="p">(</span><span class="nx">blob</span><span class="p">:</span> <span class="nx">Blob</span><span class="p">,</span> <span class="nx">options</span><span class="p">?:</span> <span class="nx">ImportOptions</span><span class="p">):</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="k">void</span><span class="o">&gt;</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kr">interface</span> <span class="nx">DexieConstructor</span> <span class="p">{</span>
    <span class="k">import</span><span class="p">(</span><span class="nx">blob</span><span class="p">:</span> <span class="nx">Blob</span><span class="p">,</span> <span class="nx">options</span><span class="p">?:</span> <span class="nx">StaticImportOptions</span><span class="p">):</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="nx">Dexie</span><span class="o">&gt;</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="staticimportoptions-and-importoptions">StaticImportOptions and ImportOptions</h2>

<p>These are the interfaces of the <code class="language-plaintext highlighter-rouge">options</code> optional arguments to Dexie.import() and Dexie.prototype.import(). All options are optional and defaults to undefined (falsy).</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">export</span> <span class="kr">interface</span> <span class="nx">StaticImportOptions</span> <span class="p">{</span>
  <span class="nl">noTransaction</span><span class="p">?:</span> <span class="nx">boolean</span><span class="p">;</span>
  <span class="nl">chunkSizeBytes</span><span class="p">?:</span> <span class="kr">number</span><span class="p">;</span> <span class="c1">// Default: DEFAULT_KILOBYTES_PER_CHUNK ( 1MB )</span>
  <span class="nl">filter</span><span class="p">?:</span> <span class="p">(</span><span class="nx">table</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="nx">value</span><span class="p">:</span> <span class="kr">any</span><span class="p">,</span> <span class="nx">key</span><span class="p">?:</span> <span class="kr">any</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">boolean</span><span class="p">;</span>
  <span class="nl">transform</span><span class="p">?:</span> <span class="p">(</span><span class="nx">table</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="nx">value</span><span class="p">:</span> <span class="kr">any</span><span class="p">,</span> <span class="nx">key</span><span class="p">?:</span> <span class="kr">any</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">({</span><span class="na">value</span><span class="p">:</span> <span class="kr">any</span><span class="p">,</span> <span class="nx">key</span><span class="p">?:</span> <span class="kr">any</span><span class="p">});</span>
  <span class="nl">progressCallback</span><span class="p">?:</span> <span class="p">(</span><span class="nx">progress</span><span class="p">:</span> <span class="nx">ImportProgress</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">boolean</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">export</span> <span class="kr">interface</span> <span class="nx">ImportOptions</span> <span class="kd">extends</span> <span class="nx">StaticImportOptions</span> <span class="p">{</span>
  <span class="nl">acceptMissingTables</span><span class="p">?:</span> <span class="nx">boolean</span><span class="p">;</span>
  <span class="nl">acceptVersionDiff</span><span class="p">?:</span> <span class="nx">boolean</span><span class="p">;</span>
  <span class="nl">acceptNameDiff</span><span class="p">?:</span> <span class="nx">boolean</span><span class="p">;</span>
  <span class="nl">acceptChangedPrimaryKey</span><span class="p">?:</span> <span class="nx">boolean</span><span class="p">;</span>
  <span class="nl">overwriteValues</span><span class="p">?:</span> <span class="nx">boolean</span><span class="p">;</span>
  <span class="nl">clearTablesBeforeImport</span><span class="p">?:</span> <span class="nx">boolean</span><span class="p">;</span>
  <span class="nl">noTransaction</span><span class="p">?:</span> <span class="nx">boolean</span><span class="p">;</span>
  <span class="nl">chunkSizeBytes</span><span class="p">?:</span> <span class="kr">number</span><span class="p">;</span> <span class="c1">// Default: DEFAULT_KILOBYTES_PER_CHUNK ( 1MB )</span>
  <span class="nl">filter</span><span class="p">?:</span> <span class="p">(</span><span class="nx">table</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="nx">value</span><span class="p">:</span> <span class="kr">any</span><span class="p">,</span> <span class="nx">key</span><span class="p">?:</span> <span class="kr">any</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">boolean</span><span class="p">;</span>
  <span class="nl">transform</span><span class="p">?:</span> <span class="p">(</span><span class="nx">table</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="nx">value</span><span class="p">:</span> <span class="kr">any</span><span class="p">,</span> <span class="nx">key</span><span class="p">?:</span> <span class="kr">any</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">({</span><span class="na">value</span><span class="p">:</span> <span class="kr">any</span><span class="p">,</span> <span class="nx">key</span><span class="p">?:</span> <span class="kr">any</span><span class="p">});</span>
  <span class="nl">progressCallback</span><span class="p">?:</span> <span class="p">(</span><span class="nx">progress</span><span class="p">:</span> <span class="nx">ImportProgress</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">boolean</span><span class="p">;</span>
<span class="p">}</span>

</code></pre></div></div>

<h2 id="importprogress">ImportProgress</h2>

<p>This is the interface sent to the progressCallback.</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">export</span> <span class="kr">interface</span> <span class="nx">ImportProgress</span> <span class="p">{</span>
  <span class="nl">totalTables</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>
  <span class="nl">completedTables</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>
  <span class="nl">totalRows</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>
  <span class="nl">completedRows</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>
  <span class="nl">done</span><span class="p">:</span> <span class="nx">boolean</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="exportoptions">ExportOptions</h2>

<p>This is the interface of the <code class="language-plaintext highlighter-rouge">options</code> optional arguments to Dexie.prototype.export(). All options are optional and defaults to undefined (falsy).</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">export</span> <span class="kr">interface</span> <span class="nx">ExportOptions</span> <span class="p">{</span>
  <span class="nl">noTransaction</span><span class="p">?:</span> <span class="nx">boolean</span><span class="p">;</span>
  <span class="nl">numRowsPerChunk</span><span class="p">?:</span> <span class="kr">number</span><span class="p">;</span>
  <span class="nl">prettyJson</span><span class="p">?:</span> <span class="nx">boolean</span><span class="p">;</span>
  <span class="nl">filter</span><span class="p">?:</span> <span class="p">(</span><span class="nx">table</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="nx">value</span><span class="p">:</span> <span class="kr">any</span><span class="p">,</span> <span class="nx">key</span><span class="p">?:</span> <span class="kr">any</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">boolean</span><span class="p">;</span>
  <span class="nl">progressCallback</span><span class="p">?:</span> <span class="p">(</span><span class="nx">progress</span><span class="p">:</span> <span class="nx">ExportProgress</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">boolean</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="exportprogress">ExportProgress</h2>

<p>This is the interface sent to the ExportOptions.progressCallback.</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">export</span> <span class="kr">interface</span> <span class="nx">ExportProgress</span> <span class="p">{</span>
  <span class="nl">totalTables</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>
  <span class="nl">completedTables</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>
  <span class="nl">totalRows</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>
  <span class="nl">completedRows</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>
  <span class="nl">done</span><span class="p">:</span> <span class="nx">boolean</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="defaults">Defaults</h2>

<p>These are the default chunk sizes used when not specified in the options object. We allow quite large chunks, but still not that large (1MB RAM is not much even for a small device).</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">DEFAULT_KILOBYTES_PER_CHUNK</span> <span class="o">=</span> <span class="mi">1024</span><span class="p">;</span> <span class="c1">// When importing blob</span>
<span class="kd">const</span> <span class="nx">DEFAULT_ROWS_PER_CHUNK</span> <span class="o">=</span> <span class="mi">2000</span><span class="p">;</span> <span class="c1">// When exporting db</span>
</code></pre></div></div>

<h1 id="json-format">JSON Format</h1>

<p>The JSON format is described in the Typescript interface below. This JSON format is streamable as it is generated
in a streaming fashion, and imported also using a streaming fashion. Therefore, it is important that the data come
last in the file.</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">export</span> <span class="kr">interface</span> <span class="nx">DexieExportJsonStructure</span> <span class="p">{</span>
  <span class="nl">formatName</span><span class="p">:</span> <span class="dl">'</span><span class="s1">dexie</span><span class="dl">'</span><span class="p">;</span>
  <span class="nl">formatVersion</span><span class="p">:</span> <span class="mi">1</span><span class="p">;</span>
  <span class="nl">data</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">databaseName</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
    <span class="nl">databaseVersion</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>
    <span class="nl">tables</span><span class="p">:</span> <span class="nb">Array</span><span class="o">&lt;</span><span class="p">{</span>
      <span class="na">name</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
      <span class="nl">schema</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span> <span class="c1">// '++id,name,age'</span>
      <span class="nl">rowCount</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>
    <span class="p">}</span><span class="o">&gt;</span><span class="p">;</span>
    <span class="nl">data</span><span class="p">:</span> <span class="nb">Array</span><span class="o">&lt;</span><span class="p">{</span> <span class="c1">// This property must be last (for streaming purpose)</span>
      <span class="na">tableName</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
      <span class="nl">inbound</span><span class="p">:</span> <span class="nx">boolean</span><span class="p">;</span>
      <span class="nl">rows</span><span class="p">:</span> <span class="kr">any</span><span class="p">[];</span> <span class="c1">// This property must be last (for streaming purpose)</span>
    <span class="p">}</span><span class="o">&gt;</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="example-json-file">Example JSON File</h2>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"formatName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dexie"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"formatVersion"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"databaseName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dexie-export-import-basic-tests"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"databaseVersion"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"tables"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"outbound"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"schema"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="nl">"rowCount"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"inbound"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"schema"</span><span class="p">:</span><span class="w"> </span><span class="s2">"++id"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"rowCount"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
      </span><span class="nl">"tableName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"outbound"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"inbound"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"rows"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">[</span><span class="w">
          </span><span class="mi">1</span><span class="p">,</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="nl">"foo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bar"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="p">[</span><span class="w">
          </span><span class="mi">2</span><span class="p">,</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="nl">"bar"</span><span class="p">:</span><span class="w"> </span><span class="s2">"foo"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">},{</span><span class="w">
      </span><span class="nl">"tableName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"inbound"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"inbound"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"rows"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
          </span><span class="nl">"date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
          </span><span class="nl">"fullBlob"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AAECAwQFBgcICQoLDA0ODxAREhMUFRYXGBkaGxwdHh8gISIjJCUmJygpKissLS4vMDEyMzQ1Njc4OTo7PD0+P0BBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWltcXV5fYGFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6e3x9fn+AgYKDhIWGh4iJiouMjY6PkJGSk5SVlpeYmZqbnJ2en6ChoqOkpaanqKmqq6ytrq+wsbKztLW2t7i5uru8vb6/wMHCw8TFxsfIycrLzM3Oz9DR0tPU1dbX2Nna29zd3t/g4eLj5OXm5+jp6uvs7e7v8PHy8/T19vf4+fr7/P3+/w=="</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"binary"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"buffer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AQID"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"byteOffset"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="nl">"length"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"foo"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"bool"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="nl">"$types"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"date"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"fullBlob"</span><span class="p">:</span><span class="w"> </span><span class="s2">"blob2"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"binary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"uint8array2"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"binary.buffer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"arraybuffer"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
          </span><span class="nl">"foo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bar"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
          </span><span class="nl">"bar"</span><span class="p">:</span><span class="w"> </span><span class="s2">"foo"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}]</span><span class="w">
  </span><span class="p">}</span><span class="w">

</span></code></pre></div></div>

<h1 id="exporting-indexeddb-databases-that-wasnt-generated-with-dexie">Exporting IndexedDB Databases that wasn’t generated with Dexie</h1>
<p>As Dexie can dynamically open non-Dexie IndexedDB databases, this is not an issue.
Sample provided here:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">Dexie</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">dexie</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span><span class="nx">importDB</span><span class="p">,</span> <span class="nx">exportDB</span><span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">dexie-export-import</span><span class="dl">"</span><span class="p">;</span>


<span class="k">async</span> <span class="kd">function</span> <span class="nx">exportDatabase</span><span class="p">(</span><span class="nx">databaseName</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Open an arbitrary IndexedDB database:</span>
  <span class="kd">const</span> <span class="nx">db</span> <span class="o">=</span> <span class="k">await</span> <span class="k">new</span> <span class="nx">Dexie</span><span class="p">(</span><span class="nx">databaseName</span><span class="p">).</span><span class="nx">open</span><span class="p">();</span>
  <span class="c1">// Export it</span>
  <span class="kd">const</span> <span class="nx">blob</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">exportDB</span><span class="p">(</span><span class="nx">db</span><span class="p">);</span>
  <span class="k">return</span> <span class="nx">blob</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">async</span> <span class="kd">function</span> <span class="nx">importDatabase</span><span class="p">(</span><span class="nx">file</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Import a file into a Dexie instance:</span>
  <span class="kd">const</span> <span class="nx">db</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">importDB</span><span class="p">(</span><span class="nx">file</span><span class="p">);</span>
  <span class="k">return</span> <span class="nx">db</span><span class="p">.</span><span class="nx">backendDB</span><span class="p">();</span> <span class="c1">// backendDB() gives you the native IDBDatabase object.</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="background--why">Background / Why</h2>

<p>This feature has been asked for a lot:</p>

<ul>
  <li>https://github.com/dexie/Dexie.js/issues/391</li>
  <li>https://github.com/dexie/Dexie.js/issues/99</li>
  <li>https://stackoverflow.com/questions/46025699/dumping-indexeddb-data</li>
</ul>

<p>My simple answer initially was this:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="k">export</span><span class="p">(</span><span class="nx">db</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">db</span><span class="p">.</span><span class="nx">transaction</span><span class="p">(</span><span class="dl">'</span><span class="s1">r</span><span class="dl">'</span><span class="p">,</span> <span class="nx">db</span><span class="p">.</span><span class="nx">tables</span><span class="p">,</span> <span class="p">()</span><span class="o">=&gt;</span><span class="p">{</span>
        <span class="k">return</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">all</span><span class="p">(</span>
            <span class="nx">db</span><span class="p">.</span><span class="nx">tables</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">table</span> <span class="o">=&gt;</span> <span class="nx">table</span><span class="p">.</span><span class="nx">toArray</span><span class="p">()</span>
                <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">rows</span> <span class="o">=&gt;</span> <span class="p">({</span><span class="na">table</span><span class="p">:</span> <span class="nx">table</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span> <span class="na">rows</span><span class="p">:</span> <span class="nx">rows</span><span class="p">})));</span>
    <span class="p">});</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="k">import</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="nx">db</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">db</span><span class="p">.</span><span class="nx">transaction</span><span class="p">(</span><span class="dl">'</span><span class="s1">rw</span><span class="dl">'</span><span class="p">,</span> <span class="nx">db</span><span class="p">.</span><span class="nx">tables</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">all</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">map</span> <span class="p">(</span><span class="nx">t</span> <span class="o">=&gt;</span>
            <span class="nx">db</span><span class="p">.</span><span class="nx">table</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">table</span><span class="p">).</span><span class="nx">clear</span><span class="p">()</span>
              <span class="p">.</span><span class="nx">then</span><span class="p">(()</span><span class="o">=&gt;</span><span class="nx">db</span><span class="p">.</span><span class="nx">table</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">table</span><span class="p">).</span><span class="nx">bulkAdd</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">rows</span><span class="p">)));</span>
    <span class="p">});</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Looks simple!</p>

<p>But:</p>

<ol>
  <li>The whole database has to fit in RAM. Can be issue on small devices.</li>
  <li>If using JSON.stringify() / JSON.parse() on the data, we won’t support exotic types (Dates, Blobs, ArrayBuffers, etc)</li>
  <li>Not possible to show a progress while importing.</li>
</ol>

<p>This addon solves these issues, and some more, with the help of some libraries.</p>

<h2 id="libraries-used">Libraries Used</h2>
<p>To accomplish a streamable export/import, and allow exotic types, I use the libraries listed below. Note that these libraries are listed as devDependencies because they are bundles using rollupjs - so there’s no real dependency from the library user perspective.</p>

<h3 id="typeson-and-typeson-registry"><a href="https://www.npmjs.com/package/typeson">typeson</a> and <a href="https://www.npmjs.com/package/typeson-registry">typeson-registry</a></h3>
<p>These modules enables something similar as JSON.stringify() / JSON.parse() for exotic or custom types.</p>

<h3 id="clarinet"><a href="https://www.npmjs.com/package/clarinet">clarinet</a></h3>
<p>This module allow to read JSON in a streaming fashion</p>

<h2 id="streaming-json">Streaming JSON</h2>
<p>I must admit that I had to do some research before I understood how to accomplish streaming JSON from client-side Javascript (both reading / writing). It is really not obvious that this would even be possible. Looking at the Blob interface, it does not provide any way of either reading or writing in a streamable fashion.</p>

<p>What I found though (after some googling) was that it is indeed possible to do that based on the current DOM platform (including IE11 !).</p>

<h3 id="reading-json-in-chunks">Reading JSON in Chunks</h3>

<p>A File or Blob represents something that can lie on a disk file and not yet be in RAM. So how do we read the first 100 bytes from a Blob without reading it all?</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">firstPart</span> <span class="o">=</span> <span class="nx">blob</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">100</span><span class="p">);</span>
</code></pre></div></div>
<p>Ok, and in the next step we use a FileReader to really read this sliced Blob into memory.</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="kd">const</span> <span class="nx">first100Chars</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">readBlob</span><span class="p">(</span><span class="nx">firstPart</span><span class="p">);</span>

<span class="kd">function</span> <span class="nx">readBlob</span><span class="p">(</span><span class="nx">blob</span><span class="p">:</span> <span class="nx">Blob</span><span class="p">):</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="kr">string</span><span class="o">&gt;</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">reject</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">reader</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">FileReader</span><span class="p">();</span>
    <span class="nx">reader</span><span class="p">.</span><span class="nx">onabort</span> <span class="o">=</span> <span class="nx">ev</span> <span class="o">=&gt;</span> <span class="nx">reject</span><span class="p">(</span><span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="dl">"</span><span class="s2">file read aborted</span><span class="dl">"</span><span class="p">));</span>
    <span class="nx">reader</span><span class="p">.</span><span class="nx">onerror</span> <span class="o">=</span> <span class="nx">ev</span> <span class="o">=&gt;</span> <span class="nx">reject</span><span class="p">((</span><span class="nx">ev</span><span class="p">.</span><span class="nx">target</span> <span class="k">as</span> <span class="kr">any</span><span class="p">).</span><span class="nx">error</span><span class="p">);</span>
    <span class="nx">reader</span><span class="p">.</span><span class="nx">onload</span> <span class="o">=</span> <span class="nx">ev</span> <span class="o">=&gt;</span> <span class="nx">resolve</span><span class="p">((</span><span class="nx">ev</span><span class="p">.</span><span class="nx">target</span> <span class="k">as</span> <span class="kr">any</span><span class="p">).</span><span class="nx">result</span><span class="p">);</span>
    <span class="nx">reader</span><span class="p">.</span><span class="nx">readAsText</span><span class="p">(</span><span class="nx">blob</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">}</span>
</code></pre></div></div>
<p>Voila!</p>

<p>But! How can we keep transactions alive when calling this non-indexedDB async call?</p>

<p>I use two different solutions for this:</p>
<ol>
  <li>If we are in a Worker, I use <code class="language-plaintext highlighter-rouge">new FileReaderSync()</code> instead of <code class="language-plaintext highlighter-rouge">new FileReader()</code>.</li>
  <li>If in the main thread, I use <code class="language-plaintext highlighter-rouge">Dexie.waitFor()</code> to while reading this short elapsed chunk, keeping the transaction alive still.</li>
</ol>

<p>Ok, fine, but how do we parse the chunk then? Cannot use JSON.parse(firstPart) because it will most definitely be incomplete.</p>

<p><a href="https://www.npmjs.com/package/clarinet">Clarinet</a> to the rescue. This library can read JSON and callback whenever JSON tokens come in.</p>

<h3 id="writing-json-in-chunks">Writing JSON in Chunks</h3>

<p>Writing JSON is solved more easily. As the BlobBuilder interface was deprecated from the DOM, I firstly found this task impossible. But after digging around, I found that this SHOULD be possible if browsers implement the Blob interface correctly.</p>

<p>Blobs can be constructed from an array of other Blobs. This is the key.</p>

<ol>
  <li>Let’s say we generate 1000 Blobs of 1MB each on a device with 512 MB RAM. If the browser does its job well, it will allow the first 200 blobs or so to reside in RAM. But then, it should start putting the remanding blobs onto temporary files.</li>
  <li>We put all these 1000 blobs into an array and generate a final Blob from that array.</li>
</ol>

<p>And that’s pretty much it.</p>

      </div>
    </div>
  </div>
  <div class="col-xs-12 col-md-4">
    <div class="row docs-page-subheader">
      <h3>Table of Contents</h3>
      <div class="docs-toc-wrapper">
        <ul class="docs-toc">
          
          
            
          
            
          
            
          
            
          
            
          
            
              <li>
                <a href="/docs/API-Reference">API Reference</a>
              </li>
            
          
            
              <li>
                <a href="/cloud/docs/access-control">Access Control in Dexie Cloud</a>
              </li>
            
          
            
              <li>
                <a href="/cloud/docs/add-demo-users">Add demo users</a>
              </li>
            
          
            
              <li>
                <a href="/cloud/docs/add-public-data">Add public data</a>
              </li>
            
          
            
              <li>
                <a href="/cloud/docs/authentication">Authentication in Dexie Cloud</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Tutorial/Best-Practices">Best Practices</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Tutorial/Building-Addons">Building Addons</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Collection/Collection">Collection</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Collection/Collection.and()">Collection.and()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Collection/Collection.clone()">Collection.clone()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Collection/Collection.count()">Collection.count()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Collection/Collection.delete()">Collection.delete()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Collection/Collection.desc()">Collection.desc()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Collection/Collection.distinct()">Collection.distinct()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Collection/Collection.each()">Collection.each()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Collection/Collection.eachKey()">Collection.eachKey()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Collection/Collection.eachPrimaryKey()">Collection.eachPrimaryKey()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Collection/Collection.eachUniqueKey()">Collection.eachUniqueKey()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Collection/Collection.filter()">Collection.filter()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Collection/Collection.first()">Collection.first()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Collection/Collection.keys()">Collection.keys()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Collection/Collection.last()">Collection.last()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Collection/Collection.limit()">Collection.limit()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Collection/Collection.modify()">Collection.modify()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Collection/Collection.offset()">Collection.offset()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Collection/Collection.or()">Collection.or()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Collection/Collection.primaryKeys()">Collection.primaryKeys()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Collection/Collection.raw()">Collection.raw()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Collection/Collection.reverse()">Collection.reverse()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Collection/Collection.sortBy()">Collection.sortBy()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Collection/Collection.toArray()">Collection.toArray()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Collection/Collection.uniqueKeys()">Collection.uniqueKeys()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Collection/Collection.until()">Collection.until()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Compound-Index">Compound Index</a>
              </li>
            
          
            
              <li>
                <a href="/cloud/docs/consistency">Consistency in Dexie Cloud</a>
              </li>
            
          
            
              <li>
                <a href="/docs/PropModification/add()">Consistent add() operator</a>
              </li>
            
          
            
              <li>
                <a href="/docs/PropModification/remove()">Consistent remove() operator</a>
              </li>
            
          
            
              <li>
                <a href="/docs/PropModification/replacePrefix()">Consistent replacePrefix() operator</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Tutorial/Consuming-dexie-as-a-module">Consuming Dexie as a module</a>
              </li>
            
          
            
          
            
              <li>
                <a href="/cloud/docs/custom-emails">Custom Emails in Dexie Cloud</a>
              </li>
            
          
            
              <li>
                <a href="/docs/DBCore/DBCore">DBCore</a>
              </li>
            
          
            
              <li>
                <a href="/docs/DBCore/DBCoreAddRequest">DBCoreAddRequest</a>
              </li>
            
          
            
              <li>
                <a href="/docs/DBCore/DBCoreCountRequest">DBCoreCountRequest</a>
              </li>
            
          
            
              <li>
                <a href="/docs/DBCore/DBCoreCursor">DBCoreCursor</a>
              </li>
            
          
            
              <li>
                <a href="/docs/DBCore/DBCoreDeleteRangeRequest">DBCoreDeleteRangeRequest</a>
              </li>
            
          
            
              <li>
                <a href="/docs/DBCore/DBCoreDeleteRequest">DBCoreDeleteRequest</a>
              </li>
            
          
            
              <li>
                <a href="/docs/DBCore/DBCoreGetManyRequest">DBCoreGetManyRequest</a>
              </li>
            
          
            
              <li>
                <a href="/docs/DBCore/DBCoreGetRequest">DBCoreGetRequest</a>
              </li>
            
          
            
              <li>
                <a href="/docs/DBCore/DBCoreIndex">DBCoreIndex</a>
              </li>
            
          
            
              <li>
                <a href="/docs/DBCore/DBCoreKeyRange">DBCoreKeyRange</a>
              </li>
            
          
            
              <li>
                <a href="/docs/DBCore/DBCoreMutateRequest">DBCoreMutateRequest</a>
              </li>
            
          
            
              <li>
                <a href="/docs/DBCore/DBCoreMutateResponse">DBCoreMutateResponse</a>
              </li>
            
          
            
              <li>
                <a href="/docs/DBCore/DBCoreOpenCursorRequest">DBCoreOpenCursorRequest</a>
              </li>
            
          
            
              <li>
                <a href="/docs/DBCore/DBCorePutRequest">DBCorePutRequest</a>
              </li>
            
          
            
              <li>
                <a href="/docs/DBCore/DBCoreQuery">DBCoreQuery</a>
              </li>
            
          
            
              <li>
                <a href="/docs/DBCore/DBCoreQueryRequest">DBCoreQueryRequest</a>
              </li>
            
          
            
              <li>
                <a href="/docs/DBCore/DBCoreQueryResponse">DBCoreQueryResponse</a>
              </li>
            
          
            
              <li>
                <a href="/docs/DBCore/DBCoreRangeType">DBCoreRangeType</a>
              </li>
            
          
            
              <li>
                <a href="/docs/DBCore/DBCoreSchema">DBCoreSchema</a>
              </li>
            
          
            
              <li>
                <a href="/docs/DBCore/DBCoreTable">DBCoreTable</a>
              </li>
            
          
            
              <li>
                <a href="/docs/DBCore/DBCoreTableSchema">DBCoreTableSchema</a>
              </li>
            
          
            
              <li>
                <a href="/docs/DBCore/DBCoreTransaction">DBCoreTransaction</a>
              </li>
            
          
            
              <li>
                <a href="/docs/DBCore/DBCoreTransactionMode">DBCoreTransactionMode</a>
              </li>
            
          
            
              <li>
                <a href="/cloud/docs/DBPermissionSet">DBPermissionSet</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Deprecations">Deprecations</a>
              </li>
            
          
            
              <li>
                <a href="/docs/DerivedWork">Derived Work</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Tutorial/Design">Design</a>
              </li>
            
          
            
          
            
              <li>
                <a href="/cloud/docs/dexie-cloud-api">Dexie Cloud API</a>
              </li>
            
          
            
              <li>
                <a href="/cloud/docs/limits">Dexie Cloud API Limits</a>
              </li>
            
          
            
              <li>
                <a href="/cloud/docs/best-practices">Dexie Cloud Best Practices</a>
              </li>
            
          
            
              <li>
                <a href="/cloud/docs/cli">Dexie Cloud CLI</a>
              </li>
            
          
            
              <li>
                <a href="/cloud/docs/">Dexie Cloud Docs</a>
              </li>
            
          
            
          
            
              <li>
                <a href="/cloud/docs/rest-api">Dexie Cloud REST API</a>
              </li>
            
          
            
              <li>
                <a href="/cloud/docs/web-hooks">Dexie Cloud Web Hooks</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Dexie/Dexie">Dexie Constructor</a>
              </li>
            
          
            
              <li>
                <a href="/docs/DexieErrors/Dexie.AbortError">Dexie.AbortError</a>
              </li>
            
          
            
              <li>
                <a href="/docs/DexieErrors/Dexie.BulkError">Dexie.BulkError</a>
              </li>
            
          
            
              <li>
                <a href="/docs/DexieErrors/Dexie.ConstraintError">Dexie.ConstraintError</a>
              </li>
            
          
            
              <li>
                <a href="/docs/DexieErrors/Dexie.DataCloneError">Dexie.DataCloneError</a>
              </li>
            
          
            
              <li>
                <a href="/docs/DexieErrors/Dexie.DataError">Dexie.DataError</a>
              </li>
            
          
            
              <li>
                <a href="/docs/DexieErrors/Dexie.DatabaseClosedError">Dexie.DatabaseClosedError</a>
              </li>
            
          
            
              <li>
                <a href="/docs/DexieErrors/Dexie.IncompatiblePromiseError">Dexie.IncompatiblePromiseError</a>
              </li>
            
          
            
              <li>
                <a href="/docs/DexieErrors/Dexie.InternalError">Dexie.InternalError</a>
              </li>
            
          
            
              <li>
                <a href="/docs/DexieErrors/Dexie.InvalidAccessError">Dexie.InvalidAccessError</a>
              </li>
            
          
            
              <li>
                <a href="/docs/DexieErrors/Dexie.InvalidArgumentError">Dexie.InvalidArgumentError</a>
              </li>
            
          
            
              <li>
                <a href="/docs/DexieErrors/Dexie.InvalidStateError">Dexie.InvalidStateError</a>
              </li>
            
          
            
              <li>
                <a href="/docs/DexieErrors/Dexie.InvalidTableError">Dexie.InvalidTableError</a>
              </li>
            
          
            
              <li>
                <a href="/docs/DexieErrors/Dexie.MissingAPIError">Dexie.MissingAPIError</a>
              </li>
            
          
            
              <li>
                <a href="/docs/DexieErrors/Dexie.ModifyError">Dexie.ModifyError</a>
              </li>
            
          
            
              <li>
                <a href="/docs/DexieErrors/Dexie.NoSuchDatabaseError">Dexie.NoSuchDatabaseErrorError</a>
              </li>
            
          
            
              <li>
                <a href="/docs/DexieErrors/Dexie.NotFoundError">Dexie.NotFoundError</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Observable/Dexie.Observable">Dexie.Observable</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Observable/Dexie.Observable.DatabaseChange">Dexie.Observable.DatabaseChange</a>
              </li>
            
          
            
              <li>
                <a href="/docs/DexieErrors/Dexie.OpenFailedError">Dexie.OpenFailedError</a>
              </li>
            
          
            
              <li>
                <a href="/docs/DexieErrors/Dexie.PrematureCommitError">Dexie.PrematureCommitError</a>
              </li>
            
          
            
              <li>
                <a href="/docs/DexieErrors/Dexie.QuotaExceededError">Dexie.QuotaExceededError</a>
              </li>
            
          
            
              <li>
                <a href="/docs/DexieErrors/Dexie.ReadOnlyError">Dexie.ReadOnlyError</a>
              </li>
            
          
            
              <li>
                <a href="/docs/DexieErrors/Dexie.SchemaError">Dexie.SchemaError</a>
              </li>
            
          
            
              <li>
                <a href="/docs/DexieErrors/Dexie.SubTransactionError">Dexie.SubTransactionError</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Syncable/Dexie.Syncable.js">Dexie.Syncable</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Syncable/Dexie.Syncable.IDatabaseChange">Dexie.Syncable.IDatabaseChange</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Syncable/Dexie.Syncable.IPersistedContext">Dexie.Syncable.IPersistentContext</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Syncable/Dexie.Syncable.ISyncProtocol">Dexie.Syncable.ISyncProtocol</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Syncable/Dexie.Syncable.StatusTexts">Dexie.Syncable.StatusTexts</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Syncable/Dexie.Syncable.Statuses">Dexie.Syncable.Statuses</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Syncable/Dexie.Syncable.registerSyncProtocol()">Dexie.Syncable.registerSyncProtocol()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/DexieErrors/Dexie.TimeoutError">Dexie.TimeoutError</a>
              </li>
            
          
            
              <li>
                <a href="/docs/DexieErrors/Dexie.TransactionInactiveError">Dexie.TransactionInactiveError</a>
              </li>
            
          
            
              <li>
                <a href="/docs/DexieErrors/Dexie.UnknownError">Dexie.UnknownError</a>
              </li>
            
          
            
              <li>
                <a href="/docs/DexieErrors/Dexie.UnsupportedError">Dexie.UnsupportedError</a>
              </li>
            
          
            
              <li>
                <a href="/docs/DexieErrors/Dexie.UpgradeError">Dexie.UpgradeError()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/DexieErrors/Dexie.VersionChangeError">Dexie.VersionChangeError</a>
              </li>
            
          
            
              <li>
                <a href="/docs/DexieErrors/Dexie.VersionError">Dexie.VersionError</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Dexie/Dexie.%5Btable%5D">Dexie.[table]</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Dexie/Dexie.addons">Dexie.addons</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Dexie/Dexie.async()">Dexie.async()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Dexie/Dexie.backendDB()">Dexie.backendDB()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Dexie/Dexie.close()">Dexie.close()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Dexie/Dexie.currentTransaction">Dexie.currentTransaction</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Dexie/Dexie.debug">Dexie.debug</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Dexie/Dexie.deepClone()">Dexie.deepClone()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Dexie/Dexie.defineClass()">Dexie.defineClass()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Dexie/Dexie.delByKeyPath()">Dexie.delByKeyPath()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Dexie/Dexie.delete()">Dexie.delete()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Dexie/Dexie.derive()">Dexie.derive()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Dexie/Dexie.events()">Dexie.events()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Dexie/Dexie.exists()">Dexie.exists()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Dexie/Dexie.extend()">Dexie.extend()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Dexie/Dexie.fakeAutoComplete()">Dexie.fakeAutoComplete()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Dexie/Dexie.getByKeyPath()">Dexie.getByKeyPath()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Dexie/Dexie.getDatabaseNames()">Dexie.getDatabaseNames()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Dexie/Dexie.hasFailed()">Dexie.hasFailed()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Dexie/Dexie.ignoreTransaction()">Dexie.ignoreTransaction()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Dexie/Dexie.isOpen()">Dexie.isOpen()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Dexie.js">Dexie.js</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Dexie/Dexie.name">Dexie.name</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Dexie/Dexie.on()">Dexie.on()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Dexie/Dexie.on.blocked">Dexie.on.blocked</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Dexie/Dexie.on.close">Dexie.on.close</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Dexie/Dexie.on.error">Dexie.on.error</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Dexie/Dexie.on.populate">Dexie.on.populate</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Dexie/Dexie.on.populate-(old-version)">Dexie.on.populate-(old-version)</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Dexie/Dexie.on.ready">Dexie.on.ready</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Dexie/Dexie.on.storagemutated">Dexie.on.storagemutated</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Dexie/Dexie.on.versionchange">Dexie.on.versionchange</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Dexie/Dexie.open()">Dexie.open()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Dexie/Dexie.override()">Dexie.override()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Dexie/Dexie.semVer">Dexie.semVer</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Dexie/Dexie.setByKeyPath()">Dexie.setByKeyPath()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Dexie/Dexie.shallowClone()">Dexie.shallowClone()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Dexie/Dexie.spawn()">Dexie.spawn()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Dexie/Dexie.table()">Dexie.table()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Dexie/Dexie.tables">Dexie.tables</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Dexie/Dexie.transaction()">Dexie.transaction()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Dexie/Dexie.transaction()-(old-version)">Dexie.transaction()-(old-version)</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Dexie/Dexie.use()">Dexie.use()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Dexie/Dexie.verno">Dexie.verno</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Dexie/Dexie.version">Dexie.version</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Dexie/Dexie.version()">Dexie.version()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Dexie/Dexie.vip()">Dexie.vip()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Dexie/Dexie.waitFor()">Dexie.waitFor()</a>
              </li>
            
          
            
              <li>
                <a href="/cloud/docs/DexieCloudOptions">DexieCloudOptions</a>
              </li>
            
          
            
              <li>
                <a href="/docs/DexieErrors/DexieError">DexieError</a>
              </li>
            
          
            
              <li>
                <a href="/docs/">Docs Home</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Download">Download</a>
              </li>
            
          
            
              <li>
                <a href="/docs/EntityTable">EntityTable</a>
              </li>
            
          
            
              <li>
                <a href="/docs/ExportImport/dexie-export-import">Export and Import Database</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Tutorial/Angular">Get started with Dexie in Angular</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Tutorial/React">Get started with Dexie in React</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Tutorial/Svelte">Get started with Dexie in Svelte</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Tutorial/Vue">Get started with Dexie in Vue</a>
              </li>
            
          
            
          
            
              <li>
                <a href="/docs/Tutorial/Hello-World">Hello World</a>
              </li>
            
          
            
              <li>
                <a href="/docs/StorageManager">How To Use the StorageManager API</a>
              </li>
            
          
            
              <li>
                <a href="/docs/inbound">Inbound</a>
              </li>
            
          
            
              <li>
                <a href="/docs/IndexSpec">IndexSpec</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Indexable-Type">Indexable Type</a>
              </li>
            
          
            
              <li>
                <a href="/docs/IndexedDB-on-Safari">IndexedDB on Safari</a>
              </li>
            
          
            
              <li>
                <a href="/cloud/docs/Invite">Invite</a>
              </li>
            
          
            
              <li>
                <a href="/cloud/docs/Member">Member</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Tutorial/Migrating-existing-DB-to-Dexie">Migrating existing DB to Dexie</a>
              </li>
            
          
            
              <li>
                <a href="/docs/MultiEntry-Index">MultiEntry Index</a>
              </li>
            
          
            
              <li>
                <a href="/cloud/docs/PersistedSyncState">PersistedSyncState</a>
              </li>
            
          
            
          
            
              <li>
                <a href="/privacy">Privacy Policy</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Promise/Promise">Promise</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Promise/Promise.PSD">Promise.PSD</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Promise/Promise.catch()">Promise.catch()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Promise/Promise.finally()">Promise.finally()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Promise/Promise.on.error">Promise.on.error</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Promise/Promise.onuncatched">Promise.onuncatched</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Questions-and-Answers">Questions and Answers</a>
              </li>
            
          
            
              <li>
                <a href="/cloud/docs/Realm">Realm</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Releasing-Dexie">Releasing Dexie</a>
              </li>
            
          
            
              <li>
                <a href="/roadmap/">Road Map</a>
              </li>
            
          
            
              <li>
                <a href="/roadmap/dexie5.0">Road Map: Dexie 5.0</a>
              </li>
            
          
            
              <li>
                <a href="/roadmap/dexie-cloud">Road Map: Dexie Cloud</a>
              </li>
            
          
            
              <li>
                <a href="/cloud/docs/Role">Role</a>
              </li>
            
          
            
              <li>
                <a href="/cloud/docs/premium-software">Run Dexie Cloud on Own Servers</a>
              </li>
            
          
            
          
            
          
            
          
            
              <li>
                <a href="/cloud/docs/scaling">Sharding and Scalability</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Simplify-with-yield">Simplify with yield</a>
              </li>
            
          
            
              <li>
                <a href="/stop-the-war">Support Ukraine</a>
              </li>
            
          
            
              <li>
                <a href="/cloud/docs/SyncState">SyncState</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Table/Table">Table</a>
              </li>
            
          
            
              <li>
                <a href="/docs/TableSchema">Table Schema</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Table/Table.add()">Table.add()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Table/Table.bulkAdd()">Table.bulkAdd()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Table/Table.bulkDelete()">Table.bulkDelete()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Table/Table.bulkGet()">Table.bulkGet()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Table/Table.bulkPut()">Table.bulkPut()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Table/Table.bulkUpdate()">Table.bulkUpdate()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Table/Table.clear()">Table.clear()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Table/Table.count()">Table.count()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Table/Table.defineClass()">Table.defineClass()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Table/Table.delete()">Table.delete()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Table/Table.each()">Table.each()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Table/Table.filter()">Table.filter()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Table/Table.get()">Table.get()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Table/Table.hook('creating')">Table.hook('creating')</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Table/Table.hook('deleting')">Table.hook('deleting')</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Table/Table.hook('reading')">Table.hook('reading')</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Table/Table.hook('updating')">Table.hook('updating')</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Table/Table.limit()">Table.limit()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Table/Table.mapToClass()">Table.mapToClass()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Table/Table.name">Table.name</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Table/Table.offset()">Table.offset()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Table/Table.orderBy()">Table.orderBy()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Table/Table.put()">Table.put()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Table/Table.reverse()">Table.reverse()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Table/Table.schema">Table.schema</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Table/Table.toArray()">Table.toArray()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Table/Table.toCollection()">Table.toCollection()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Table/Table.update()">Table.update()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Table/Table.where()">Table.where()</a>
              </li>
            
          
            
          
            
              <li>
                <a href="/docs/The-Main-Limitations-of-IndexedDB">The main limitations of IndexedDB</a>
              </li>
            
          
            
          
            
              <li>
                <a href="/docs/Transaction/Transaction">Transaction</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Transaction/Transaction.abort()">Transaction.abort()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Transaction/Transaction.on.abort">Transaction.on.abort</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Transaction/Transaction.on.complete">Transaction.on.complete</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Transaction/Transaction.on.error">Transaction.on.error</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Transaction/Transaction.table()">Transaction.table()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Tutorial/">Tutorial</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Typescript">Typescript</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Typescript-old">Typescript (old)</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Tutorial/Understanding-the-basics">Understanding the basics</a>
              </li>
            
          
            
              <li>
                <a href="/cloud/docs/UserLogin">UserLogin</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Version/Version">Version</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Version/Version.stores()">Version.stores()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Version/Version.upgrade()">Version.upgrade()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/WhereClause/WhereClause">WhereClause</a>
              </li>
            
          
            
              <li>
                <a href="/docs/WhereClause/WhereClause.above()">WhereClause.above()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/WhereClause/WhereClause.aboveOrEqual()">WhereClause.aboveOrEqual()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/WhereClause/WhereClause.anyOf()">WhereClause.anyOf()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/WhereClause/WhereClause.anyOfIgnoreCase()">WhereClause.anyOfIgnoreCase()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/WhereClause/WhereClause.below()">WhereClause.below()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/WhereClause/WhereClause.belowOrEqual()">WhereClause.belowOrEqual()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/WhereClause/WhereClause.between()">WhereClause.between()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/WhereClause/WhereClause.equals()">WhereClause.equals()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/WhereClause/WhereClause.equalsIgnoreCase()">WhereClause.equalsIgnoreCase()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/WhereClause/WhereClause.inAnyRange()">WhereClause.inAnyRange()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/WhereClause/WhereClause.noneOf()">WhereClause.noneOf()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/WhereClause/WhereClause.notEqual()">WhereClause.notEqual()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/WhereClause/WhereClause.startsWith()">WhereClause.startsWith()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/WhereClause/WhereClause.startsWithAnyOf()">WhereClause.startsWithAnyOf()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/WhereClause/WhereClause.startsWithAnyOfIgnoreCase()">WhereClause.startsWithAnyOfIgnoreCase()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/WhereClause/WhereClause.startsWithIgnoreCase()">WhereClause.startsWithIgnoreCase()</a>
              </li>
            
          
            
              <li>
                <a href="/cloud/docs/db.cloud.configure()">db.cloud.configure()</a>
              </li>
            
          
            
              <li>
                <a href="/cloud/docs/db.cloud.currentUser">db.cloud.currentUser</a>
              </li>
            
          
            
              <li>
                <a href="/cloud/docs/db.cloud.currentUserId">db.cloud.currentUserId</a>
              </li>
            
          
            
              <li>
                <a href="/cloud/docs/db.cloud.events.syncComplete">db.cloud.events.syncComplete</a>
              </li>
            
          
            
              <li>
                <a href="/cloud/docs/db.cloud.invites">db.cloud.invites</a>
              </li>
            
          
            
              <li>
                <a href="/cloud/docs/db.cloud.login()">db.cloud.login()</a>
              </li>
            
          
            
              <li>
                <a href="/cloud/docs/db.cloud.logout()">db.cloud.logout()</a>
              </li>
            
          
            
              <li>
                <a href="/cloud/docs/db.cloud.options">db.cloud.options</a>
              </li>
            
          
            
              <li>
                <a href="/cloud/docs/db.cloud.permissions()">db.cloud.permissions()</a>
              </li>
            
          
            
              <li>
                <a href="/cloud/docs/db.cloud.persistedSyncState">db.cloud.persistedSyncState</a>
              </li>
            
          
            
              <li>
                <a href="/cloud/docs/db.cloud.roles">db.cloud.roles</a>
              </li>
            
          
            
              <li>
                <a href="/cloud/docs/db.cloud.schema">db.cloud.schema</a>
              </li>
            
          
            
              <li>
                <a href="/cloud/docs/db.cloud.sync()">db.cloud.sync()</a>
              </li>
            
          
            
              <li>
                <a href="/cloud/docs/db.cloud.syncState">db.cloud.syncState</a>
              </li>
            
          
            
              <li>
                <a href="/cloud/docs/db.cloud.userInteraction">db.cloud.userInteraction</a>
              </li>
            
          
            
              <li>
                <a href="/cloud/docs/db.cloud.usingServiceWorker">db.cloud.usingServiceWorker</a>
              </li>
            
          
            
              <li>
                <a href="/cloud/docs/db.cloud.version">db.cloud.version</a>
              </li>
            
          
            
              <li>
                <a href="/cloud/docs/db.cloud.webSocketStatus">db.cloud.webSocketStatus</a>
              </li>
            
          
            
              <li>
                <a href="/cloud/docs/db.members">db.members</a>
              </li>
            
          
            
              <li>
                <a href="/cloud/docs/db.realms">db.realms</a>
              </li>
            
          
            
              <li>
                <a href="/cloud/docs/db.roles">db.roles</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Syncable/db.syncable.connect()">db.syncable.connect()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Syncable/db.syncable.delete()">db.syncable.delete()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Syncable/db.syncable.disconnect()">db.syncable.disconnect()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Syncable/db.syncable.getOptions()">db.syncable.getOptions()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Syncable/db.syncable.getStatus()">db.syncable.getStatus()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Syncable/db.syncable.list()">db.syncable.list()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Syncable/db.syncable.on('statusChanged')">db.syncable.on('statusChanged')</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Syncable/db.syncable.setFilter()">db.syncable.setFilter()</a>
              </li>
            
          
            
              <li>
                <a href="/cloud/docs/dexie-cloud-addon">dexie-cloud-addon</a>
              </li>
            
          
            
              <li>
                <a href="/docs/libs/dexie-react-hooks">dexie-react-hooks</a>
              </li>
            
          
            
              <li>
                <a href="/docs/liveQuery()">liveQuery()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/Promise/unhandledrejection-event">unhandledrejection-event</a>
              </li>
            
          
            
              <li>
                <a href="/docs/dexie-react-hooks/useLiveQuery()">useLiveQuery()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/dexie-react-hooks/useObservable()">useObservable()</a>
              </li>
            
          
            
              <li>
                <a href="/docs/dexie-react-hooks/usePermissions()">usePermissions()</a>
              </li>
            
          
        </ul>
      </div>
    </div>
  </div>
</div>
    </main>

    <footer class="container">
  <p>Dexie.js - A Minimalistic Wrapper for IndexedDB</p>
  <p>&copy; 2014-2024 Dexie.js is the creation of David Fahlander and managed by Awarica AB.</p>
</footer>


    <script src='/assets/js/prism-2020.js'></script>
    <script src='/assets/js/prism-svelte.js'></script>
		<script src='/assets/js/jquery.min.js'></script>
		<script src='/assets/js/bootstrap.min.js'></script>

    <script src="https://cdn.jsdelivr.net/gh/manucaralmo/GlowCookies@3.1.8/src/glowCookies.min.js"></script>
<script>
  document.getElementById('cookie-settings-icon').style.display = localStorage.getItem('GlowCookies') == "1" ? 'none' : '';
  glowCookies.start('en', {
      style: 1,
      analytics: 'G-7W0YET4Q10',
      hideAfterClick: true,
      policyLink: 'https://dexie.org/privacy',
      customScript: [{ type: 'custom', position: 'body', content: "updateSwitchFromStorage();" }]
  });
</script>
<!--
<script async src="https://www.googletagmanager.com/gtag/js?id=G-7W0YET4Q10"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-7W0YET4Q10');
</script>
-->



    <!-- Include dexie for people wanting to open devtools to laborate -->
    <script async src='https://unpkg.com/dexie'></script>
    
    <!-- Highlight anchors the same way as github wiki works -->
    <script defer src="/assets/js/highlight-anchors.js"></script>
    
  </body>

</html>
